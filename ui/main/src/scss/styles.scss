/* Copyright (c) 2020, RTEi (http://www.rte-international.com)
 * Copyright (c) 2021-2024, RTE (http://www.rte-france.com)
 * See AUTHORS.txt
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * SPDX-License-Identifier: MPL-2.0
 * This file is part of the OperatorFabric project.
 */

/* You can add global styles to this file, and also import other style files */
@use '../../node_modules/ag-grid-community/styles' as ag;
/* stylelint-disable-next-line scss/load-no-partial-leading-underscore */
@import '../../node_modules/ngx-chips/core/styles/core/_core';

*, ::after, ::before {
  box-sizing: border-box;
}

p {
  margin-top: 0;
}



body {
    color: #bababa;
    padding: 80px 0 30px;
    margin: 0;
    background-color: #262f3d;
    height: 100vh;
    line-height: 1.5;
    font-family: var(--opfab-font-family);
    font-size: 13px;

    // scroll styling for firefox only
    scrollbar-color: var(--opfab-scrollbar-bar-bgcolor-firefox) var(--opfab-scrollbar-bgcolor-firefox);
}

* :focus-visible {
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgb(13 110 253 / 25%);
}

.opfab-col {
    position: relative;
    flex: 1 0 0;
    margin-right: 0.75rem;
    margin-left: 0.75rem;
}

.opfab-col-6 {
    position: relative;
    flex: 0 0 auto;
    margin-right: 0.75rem;
    margin-left: 0.75rem;
    width: 50%;
}

.opfab-row {
    display: flex;
    flex-wrap: wrap;
    margin-right: -0.75rem;
    margin-left: -0.75rem;
}

/* stylelint-disable selector-class-pattern */
// Colors for state types
.opfab-type-of-state-INPROGRESS {
    color: var(--opfab-color-darker-orange);
}

.opfab-type-of-state-FINISHED {
    color: var(--opfab-color-green);
}

.opfab-type-of-state-CANCELED {
    color: var(--opfab-color-red);
}
/* stylelint-enable selector-class-pattern */

// CUSTOM SCROLLBAR STYLE
// for chromium based browser

::-webkit-scrollbar {
    width: 16px;
}

::-webkit-scrollbar-track {
    border-radius: 8px;
    background: var(--opfab-scrollbar-bgcolor);
    border: solid 1px var(--opfab-scrollbar-border-color);
}

::-webkit-scrollbar-thumb {
    background: var(--opfab-scrollbar-bar-bgcolor);
    border-radius: 8px;
    border: solid 1px var(--opfab-scrollbar-bar-border-color);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--opfab-scrollbar-bar-bgcolor);
    border-radius: 8px;
    border: solid 1px var(--opfab-scrollbar-bar-border-color);
}

// END CUSTOM SCROLLBAR STYLE

// CUSTOM SPINNER

.opfab-slow-spinner {
    animation: fa-spin 2s infinite linear;
}

// Spinner when loading cards or table of cards
// the spinner is in the center of the screen

.opfab-card-loading-spinner {
    font-size: 68px;
    width: 150px;
    height: 150px;
    margin: auto;
    text-align: center;
    background-color: var(--opfab-bgcolor);
    color: var(--opfab-text-color);
}

// END OF CUSTOM SPINNER

// EXPORT ICON
.opfab-icon-export-data {
    display: inline-block;
    height: 28px;
    width: 28px;
    margin-right: 10px;
    margin-top: 10px;
    background: var(--opfab-text-color);
    mask: url('../assets/images/icons/export-data.svg');
}

// INPUT FIELD STYLE

.opfab-input {
    box-sizing: border-box;
    position: relative;
    color: var(--opfab-input-text-color);
    border: 1px solid var(--opfab-form-border-color);
    border-radius: 3px;
    font-size: 13px;
    height: 46px;
    outline: none;
    background-color: var(--opfab-bgcolor-darker);
}

// HOUR INPUT FIELD STYLE
::-webkit-calendar-picker-indicator {
    filter: invert(50%); // sets the time picker in gray on google chrome
}

// Pagination component config
ngb-pagination {
    .page-link {
        background-color: var(--opfab-bgcolor-darker);
        color: var(--opfab-text-color-stronger);
        border: 0;
    }

    .page-link:focus {
        box-shadow: none;
    }

    .page-item.active .page-link {
        background-color: var(--opfab-pagination-active-page-background);
        color: var(--opfab-bgcolor-darker);
    }

    .page-item :hover {
        background-color: var(--opfab-button-disable-bgcolor);
        color: var(--opfab-text-color-stronger);
    }

    .page-item.disabled .page-link {
        background-color: var(--opfab-bgcolor-darker);
        color: var(--opfab-pagination-disabled-link);
    }
}

.pagination {
    margin-top: 5px;
}

// Override color for today in calendar
.alert-info {
    background-color: var(--opfab-bgcolor);
}

// ngbModal configuration
.modal-fullscreen {
    max-width: 100vw * 0.9;
    margin-left: 100vw * 0.05;
    max-height: calc(100% - 35px);
    margin-top: 25px;
    margin-bottom: 10px;
    transition: 0s !important;
}

.modal-usercard {
    max-width: 1300px;
}

.modal-body {
    background-color: var(--opfab-bgcolor);
    color: var(--opfab-textcolor);
    font-size: 16px;
    font-weight: 400;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}

.modal-body-rounded {
    border-radius: 6px;
}

.modal-body-squared {
    border-radius: 0;
}

.modal-header {
    background-color: var(--opfab-bgcolor);
    height: 60px;
    font-size: 20px;
    font-weight: bold;
    justify-content: space-between;
    color: var(--opfab-color-darker);
}

.opfab-close-modal-icon {
    color: var(--opfab-navbar-color);
    margin-left: 5px;
    margin-right: 5px;
    letter-spacing: 0.54px;
    line-height: 30px;
    font-size: 30px;
    cursor: pointer;

    &:hover,
    &:focus {
        color: var(--opfab-navbar-color-hover);
    }
}

// Specific configuration for modal in administration interface
.cdk-overlay-container,
.cdk-overlay-pane {
    z-index: 9999 !important;
}

.opfab-timeline-bgcolor {
    background-color: var(--opfab-timeline-bgcolor);
}

%opfab-popover {
    background-color: var(--opfab-popover-bgcolor);
    color: var(--opfab-text-color);

    .popover-header {
        color: var(--opfab-text-color);
        background-color: var(--opfab-popover-bgcolor);
        border-bottom: 1px solid var(--opfab-text-color);
    }

    .popover-body {
        color: var(--opfab-text-color);
        margin-top: -10px;
        margin-bottom: -10px;
    }

    .arrow::after {
        border-right-color: var(--opfab-popover-bgcolor);
    }
}

.opfab-popover {
    @extend %opfab-popover;
}

.opfab-popover-unclickable {
    @extend %opfab-popover;

    pointer-events: none;
}

.opfab-popover-wide {
    @extend %opfab-popover;

    max-width: 100%;
}

.opfab-popover-arrow-shift-right {
    @extend %opfab-popover;

    max-width: 100%;

    .popover-arrow::after,
    .popover-arrow::before {
        left: 150px;
    }
}

.opfab-popover-with-scrolling {
    max-width: 800px;

    .popover-body {
        padding: 0;
        max-height: 500px;
        overflow: hidden;
        margin-top: 0;
        margin-bottom: 0;
    }
}

.opfab-popover-left-menu {
    background-color: var(--opfab-popover-bgcolor);
    color: var(--opfab-text-color);
    min-width: 330px !important;
    padding-right: 0;

    .popover-header {
        color: var(--opfab-text-color);
        background-color: var(--opfab-popover-bgcolor);
        border-bottom: 1px solid var(--opfab-text-color);
    }

    .popover-body {
        color: var(--opfab-text-color);
    }

    .arrow::after {
        border-right-color: var(--opfab-popover-bgcolor);
    }
}

.opfab-popover-no-arrow {
    background-color: var(--opfab-popover-bgcolor);
    color: var(--opfab-text-color);

    .popover-header {
        color: var(--opfab-text-color);
        background-color: var(--opfab-popover-bgcolor);
        border-bottom: 1px solid var(--opfab-text-color);
    }

    .popover-body {
        color: var(--opfab-text-color);
    }

    .popover-arrow {
        display: none;
    }

    .popover-arrow::after {
        border-bottom: 0;
    }
}

.opfab-bubble-text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 600px;
}

// OpFab customization of the alpine theme for ag-grid
// It allows the colors to match the ones from the OpFab global style and to respond to the night/day mode

@include ag.grid-styles(
    (
        // ^^^ Include ag.grid-styles which it is no longer nested  in .ag-theme-{name} {}
        theme: opfab,
        extend-theme: alpine,
        // ^^^ Add the theme name to the mixin
        background-color: var(--opfab-bgcolor),
        header-background-color: var(--opfab-bgcolor-darker),
        odd-row-background-color: var(--opfab-bgcolor-darker),
        modal-overlay-background-color: var(--opfab-bgcolor),
        data-color: var(--opfab-text-color),
        header-foreground-color: var(--opfab-text-color),
        secondary-foreground-color: var(--opfab-text-color),
        input-disabled-background-color: var(--opfab-button-disable-bgcolor),
        input-disabled-border-color: var(--opfab-button-disable-bgcolor),
        header-column-resize-handle-color: var(--opfab-table-border-color)
    )
);

// this settings is necessary to have tooltips in cell that can be visible outside the cell
.opfab-cell-overflow-visible {
    .ag-cell-value {
        overflow: visible;
    }
}

.ag-theme-opfab {
    --ag-borders: none;
    --ag-header-height: 70px;
    --ag-icon-font-color: var(--opfab-text-color);

    // This is done to reduce min-height (150px by default) in order to remove empty space when there is 1 line or 2
    // The height of a line is 42 (40 + 1*2 padding)
    .ag-layout-auto-height {
        .ag-center-cols-clipper,
        .ag-center-cols-container,
        .ag-body-viewport {
            min-height: 42px;
        }
    }

    // This is a workaround to avoid duplicated bottom border after page change
    .ag-sticky-bottom {
        display: none;
    }

    color: var(--opfab-text-color);

    .ag-root-wrapper {
        border-bottom: 1px solid var(--opfab-table-border-color);
    }

    .ag-theme-alpine {
        color: var(--opfab-text-color);
    }

    .ag-menu {
        background: var(--opfab-bgcolor-darker);
    }

    .ag-header-row {
        border-top: 1px solid var(--opfab-table-border-color);
        border-bottom: 1px solid var(--opfab-table-border-color);
    }

    .ag-row {
        border: 0;
    }

    .ag-row:hover {
        border: 2px solid var(--opfab-color-blue);
    }

    .opfab-ag-header-with-no-padding {
        padding-left: 0;
        padding-right: 0;
    }

    .opfab-ag-cheader-with-right-padding {
        padding-left: 0;
        padding-right: 20px;
    }

    .opfab-ag-cell-with-no-padding {
        padding-left: 0;
        padding-right: 0;
        font-size: 13px;
    }

    .opfab-ag-cell-with-no-padding-right {
        padding-right: 0;
    }

    .opfab-ag-cell-with-left-padding {
        padding-left: 5px;
        padding-right: 0;
        font-size: 13px;
    }

    .ag-cell-label-container,
    .ag-header-cell-comp-wrapper {
        height: 100%;
        width: 100%;
    }

    .action-cell-delete-admin {
        display: none;
    }

    .action-cell-column-header {
        display: none;
    }

    .opfab-sev-alarm {
        background-color: var(--opfab-color-severity-alarm);
        font-size: 0;
        padding-right: 0;
    }

    .opfab-sev-action {
        background-color: var(--opfab-color-severity-action);
        font-size: 0;
        padding-right: 0;
    }

    .opfab-sev-compliant {
        background-color: var(--opfab-color-severity-compliant);
        font-size: 0;
        padding-right: 0;
    }

    .opfab-sev-information {
        background-color: var(--opfab-color-severity-information);
        font-size: 0;
        padding-right: 0;
    }

    .ag-cell-wrap-text {
        word-break: normal;
    }

    .ag-header-cell-sortable {
        cursor: default;

        .ag-header-cell-label {
            cursor: pointer;
        }
    }

    .ag-header-cell-menu-button {
        cursor: pointer;
    }

    .ag-center-cols-viewport {
        min-height: unset !important;
    }
}

.opfab-monitoring-ag-grid-row {
    cursor: pointer;
}

// OpFab customization of the default theme for ngx-chips component
// It allows the colors to match the ones from the OpFab global style and to respond to the night/day mode

tag-input {
    .ng2-tag-input.opfab-theme {
        @include tag-input-theme(
            (
                container-border-bottom: none,
                container-border-bottom-focused: none,
                box-shadow: none
            )
        );

        tag {
            @include tag-theme(
                (
                    background: var(--opfab-color-blue),
                    background-focused: var(--opfab-color-blue),
                    background-active: var(--opfab-color-blue),
                    background-hover: var(--opfab-color-blue),
                    color: #fff,
                    color-hover: #fff,
                    border-radius: 2px,
                    box-shadow: none,
                    margin: 0.3rem 0.1rem 0.3rem 0.8rem,
                    height: 26px,
                    line-height: 26px,
                    font-family: var(--opfab-font-family)
                )
            );

            delete-icon {
                @include icon-theme(
                    (
                        fill: #fff,
                        fill-focus: #fff,
                        transition: all 0.35s
                    )
                );

                svg {
                    transform: translate(0, -4px) scale(0.8);
                }
            }
        }

        input {
            @include tag-theme(
                (
                    background: var(--opfab-bgcolor),
                    background-focused: var(--opfab-bgcolor),
                    background-active: var(--opfab-bgcolor),
                    background-hover: var(--opfab-bgcolor),
                    color: var(--opfab-color),
                    color-hover: var(--opfab-color)
                )
            );
        }
    }
}

.opfab-link {
    display: block;
    color: var(--opfab-navbar-color);
    text-align: center;
    text-decoration: underline;

    span {
        cursor: pointer;
    }

    &:hover,
    &:focus {
        color: var(--opfab-navbar-color-hover);
        text-decoration: none;
    }
}

.opfab-icon-help {
    display: inline-block;
    height: 13px;
    width: 13px;
    margin-bottom: -2px;
    margin-right: 10px;
    border-width: 0;
    background: var(--opfab-text-color-stronger);
    mask: url('../assets/images/icons/help.svg');
}

// QUILLJS STYLE
.ql-snow .ql-editor {
    min-height: 100px;
}

.ql-snow .ql-stroke {
    stroke: var(--opfab-text-color) !important;
}

.ql-fill {
    fill: var(--opfab-text-color) !important;
}

.ql-snow .ql-picker {
    color: var(--opfab-text-color) !important;
}

.ql-snow .ql-picker.ql-expanded .ql-picker-options {
    z-index: 100 !important;
}

.ql-snow .ql-tooltip {
    z-index: 100 !important;
}

.ql-container.ql-snow {
    border: 0 !important;
}

.ql-toolbar.ql-snow {
    border: 1px solid var(--opfab-form-border-color) !important;
    border-radius: 3px;
    margin-top: -1px;
    margin-left: -1px;
    margin-right: -1px;
}

.ql-snow.ql-toolbar button {
    margin-left: 2px;
}

.ql-snow.ql-toolbar button.ql-active {
    background: var(--opfab-richtexteditor-button-active);
    border-radius: 3px;
    padding: 2px;
}

.ql-picker-label {
    color: var(--opfab-color) !important;
}

.ql-picker-label.ql-active {
    background: var(--opfab-richtexteditor-button-active);
    border-radius: 3px;
}

// END QUILLJS STYLE

// QUILLJS TRANSLATION: quill.js labels are defined inside css.
// Need to use variables to handle internationalization
.ql-snow .ql-tooltip::before {
    content: var(--opfab-richtext-link-visit) !important;
}

.ql-snow .ql-tooltip[data-mode='link']::before {
    content: var(--opfab-richtext-link-enter) !important;
}

.ql-snow .ql-tooltip a.ql-action::after {
    content: var(--opfab-richtext-link-edit) !important;
}

.ql-snow .ql-tooltip.ql-editing a.ql-action::after {
    content: var(--opfab-richtext-link-save) !important;
}

.ql-snow .ql-tooltip a.ql-remove::before {
    content: var(--opfab-richtext-link-remove) !important;
}

// END QUILLJS TRANSLATION

// CUSTOM STYLE FOR DATE RANGE PICKER
// The component always has with a white background, some colors need to be overridden

.md-drppicker {
    min-width: 500px !important;
}

.md-drppicker .available {
    color: black;
}

.md-drppicker td.available:hover {
    color: black !important;
}

// END CUSTOM STYLE FOR DATE RANGE PICKER
